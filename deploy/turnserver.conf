# TURN Server Configuration for Ghost Chat
# coturn TURN server

# Network settings
listening-port=3478
tls-listening-port=5349
listening-ip=0.0.0.0

# External IP
external-ip=YOUR_SERVER_IP

# Relay port range for media
min-port=49152
max-port=65535

# Realm and server name
realm=gbskgs.xyz
server-name=gbskgs.xyz

# Authentication - Time-limited credentials via HMAC-SHA1
# The shared secret is used by the backend to generate temporary credentials
# Static user removed for security - now using dynamic auth
use-auth-secret
static-auth-secret=CHANGE_ME

# TLS certificates (same as nginx)
cert=/etc/ssl/turn/gbskgs.xyz/fullchain.pem
pkey=/etc/ssl/turn/gbskgs.xyz/privkey.pem

# Security settings
no-multicast-peers
no-cli
no-loopback-peers
no-tcp-relay

# Fingerprint for DTLS
fingerprint

# Quota and limits
total-quota=100
bps-capacity=0
stale-nonce=600
max-bps=1000000

# Deny relay to private networks (prevent abuse)
denied-peer-ip=0.0.0.0-0.255.255.255
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=100.64.0.0-100.127.255.255
denied-peer-ip=127.0.0.0-127.255.255.255
denied-peer-ip=169.254.0.0-169.254.255.255
denied-peer-ip=172.16.0.0-172.31.255.255
denied-peer-ip=192.0.0.0-192.0.0.255
denied-peer-ip=192.0.2.0-192.0.2.255
denied-peer-ip=192.88.99.0-192.88.99.255
denied-peer-ip=192.168.0.0-192.168.255.255
denied-peer-ip=198.18.0.0-198.19.255.255
denied-peer-ip=198.51.100.0-198.51.100.255
denied-peer-ip=203.0.113.0-203.0.113.255
denied-peer-ip=240.0.0.0-255.255.255.255

# Logging (disable in production for privacy)
# verbose
# log-file=/var/log/turnserver.log
no-stdout-log
